<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ugrálós Secret Game</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f0f0f0;
    overflow: hidden;
  }
  #gameCanvas {
    background: #222;
    display: block;
    margin: 0 auto;
  }
  #score {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
    font-size: 24px;
    font-weight: bold;
  }
</style>
</head>
<body>

<div id="score">Pont: 0</div>
<canvas id="gameCanvas" width="800" height="300"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let score = 0;
let gameSpeed = 4;
let gravity = 0.6;
let obstacles = [];

class Dino {
  constructor() {
    this.x = 50;
    this.y = 200;
    this.width = 40;
    this.height = 40;
    this.dy = 0;
    this.jumpPower = -12;
    this.grounded = false;
  }
  draw() {
    ctx.fillStyle = "lime";
    ctx.fillRect(this.x, this.y, this.width, this.height);
  }
  update() {
    if (this.y + this.height < canvas.height) {
      this.dy += gravity;
      this.grounded = false;
    } else {
      this.dy = 0;
      this.grounded = true;
      this.y = canvas.height - this.height;
    }
    this.y += this.dy;
    this.draw();
  }
  jump() {
    if (this.grounded) {
      this.dy = this.jumpPower;
      this.grounded = false;
    }
  }
}

class Obstacle {
  constructor() {
    this.width = 20 + Math.random()*20;
    this.height = 30 + Math.random()*30;
    this.x = canvas.width;
    this.y = canvas.height - this.height;
  }
  draw() {
    ctx.fillStyle = "red";
    ctx.fillRect(this.x, this.y, this.width, this.height);
  }
  update() {
    this.x -= gameSpeed;
    this.draw();
  }
}

const dino = new Dino();
let gameOver = false;

function spawnObstacle() {
  obstacles.push(new Obstacle());
}

function detectCollision(dino, obs) {
  return dino.x < obs.x + obs.width &&
         dino.x + dino.width > obs.x &&
         dino.y < obs.y + obs.height &&
         dino.y + dino.height > obs.y;
}

function animate() {
  ctx.clearRect(0,0,canvas.width, canvas.height);

  dino.update();

  obstacles.forEach((ob, i) => {
    ob.update();
    if (detectCollision(dino, ob)) {
      gameOver = true;
    }
    if (ob.x + ob.width < 0) {
      obstacles.splice(i, 1);
      score++;
      document.getElementById("score").innerText = "Pont: " + score;
      if(score % 5 === 0) gameSpeed += 0.5; // nehezítés
    }
  });

  if(!gameOver) requestAnimationFrame(animate);
  else {
    ctx.fillStyle = "white";
    ctx.font = "30px Arial";
    ctx.fillText("GAME OVER! Pont: " + score, 200, 150);
  }
}

document.addEventListener("keydown", e => {
  if(e.code === "Space") dino.jump();
});

canvas.addEventListener("touchstart", e => {
  dino.jump();
});

setInterval(spawnObstacle, 1500);

animate();
</script>

</body>
</html>
